# ─── Checkbot RAG ─────────────────────────────────────────────────────────────
# Fact-check RAG service with hybrid vector + full-text search.
# Admin UI: http://checkbot-rag.localhost
# MCP endpoint: /mcp (clients use this instance's URL; optional CHECKBOT_RAG_MCP_API_KEY)

CHECKBOT_RAG_PORT=3020

# PostgreSQL (own instance, isolated from LibreChat vectordb)
CHECKBOT_RAG_POSTGRES_DB=checkbot_rag
CHECKBOT_RAG_POSTGRES_USER=checkbot_rag
CHECKBOT_RAG_POSTGRES_PASSWORD=

# Embedding — Scaleway Qwen3-Embedding-8B (MTEB multilingual #1, €0.10/M tokens)
# API is OpenAI-compatible; also supports: openrouter, openai
CHECKBOT_RAG_EMBEDDING_PROVIDER=scaleway
CHECKBOT_RAG_EMBEDDING_MODEL=qwen3-embedding-8b
CHECKBOT_RAG_EMBEDDING_API_KEY=
CHECKBOT_RAG_EMBEDDING_BASE_URL=https://api.scaleway.ai/v1
# Matryoshka dimensions: Qwen3 supports 32–4096; pgvector ANN indexes support up to 2000 dims.
# 1536 is a good default; reduce further (e.g. 1024) when approaching 500k+ claims to save memory.
CHECKBOT_RAG_EMBEDDING_DIMENSIONS=1536
CHECKBOT_RAG_EMBEDDING_BATCH_SIZE=32

# Hybrid Search tuning (RRF — Reciprocal Rank Fusion)
CHECKBOT_RAG_SEARCH_WEIGHT_VEC=1.0
CHECKBOT_RAG_SEARCH_WEIGHT_FTS=1.0
CHECKBOT_RAG_RRF_K=60
CHECKBOT_RAG_SEARCH_OVERFETCH=3

# Chunking
CHECKBOT_RAG_MAX_CHUNK_CHARS=6000

# MCP auth (optional). If set, clients must send Authorization: Bearer <this value> for /mcp
CHECKBOT_RAG_MCP_API_KEY=